{"remainingRequest":"/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/node_modules/babel-loader/lib/index.js!/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/src/views/oj/components/Heads.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/src/views/oj/components/Heads.vue","mtime":1550410486000},{"path":"/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mo/Documents/Projects/ideaWorkspace/OnlineJudge/VuePageV2/vue-page-v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { hex_md5 } from '../../../assets/md5.js';\nimport { mapActions, mapState, mapGetters } from 'vuex'; //注册 action 和 state\n\nexport default {\n  name: 'Heads',\n  data: function data() {\n    return {\n      active_name: \"home\",\n      user: null,\n      admin: false,\n      loginModal_flag: false,\n      formValidate: {\n        username: '',\n        passwd: '',\n        pwd: ''\n      },\n      ruleValidate: {\n        username: [{\n          required: true,\n          message: 'The name cannot be empty',\n          trigger: 'blur'\n        }],\n        pwd: [{\n          required: true,\n          message: 'Password cannot be empty',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    /**\n     * 登录请求\n     */\n    loginModalOk: function loginModalOk() {\n      var _this = this;\n\n      this.$refs['formValidate'].validate(function (valid) {\n        if (valid) {\n          // console.log(\"验证登录中...\");\n\n          /*var params = new URLSearchParams();\n          params.append('username', this.formValidate.name);\n          params.append('passwd', hex_md5(encodeURIComponent(this.formValidate.passwd + 'onlinejudge')));*/\n          _this.formValidate.passwd = hex_md5(encodeURIComponent(_this.formValidate.pwd + 'onlinejudge')); //清除passwd\n\n          _this.$axios({\n            url: '/api/api-oj/login',\n            method: 'post',\n            data: require('querystring').stringify(_this.formValidate)\n          }).then(function (res) {\n            console.info('后台返回的数据', res.data);\n\n            if (res.data.code === 200) {\n              _this.$Message.success('Success!');\n\n              _this.$store.dispatch('login', res.data.data);\n\n              _this.user = _this.$store.state.user;\n              _this.admin = _this.$store.state.admin;\n              _this.loginModal_flag = false;\n            } else {\n              _this.loginModal_flag = true;\n\n              _this.$Message.error(res.data.message);\n            }\n          }).catch(function (err) {\n            console.info('报错的信息', err);\n\n            _this.$Message.error('Fail!');\n\n            _this.loginModal_flag = false;\n          });\n        } else {\n          _this.$Message.error('input Error! Please Check!');\n\n          _this.loginModal_flag = true;\n        }\n      });\n    },\n\n    /**\n     * 注销请求\n     */\n    logout: function logout() {\n      //TODO 请求注销\n      this.$axios({\n        url: '/api/api-oj/logout',\n        method: 'post',\n        data: 'user_id = ' + this.user.user_id\n      }).then(function (res) {\n        console.info('后台返回的数据', res.data);\n\n        if (res.data.code === 200) {} else {}\n      });\n      this.$store.dispatch('logout');\n      this.user = null;\n    },\n    logger: function logger() {\n      console.log(\"md5:\" + hex_md5(encodeURIComponent('120211onlinejudge')));\n    }\n  },\n  watch: {\n    active_class: function active_class(value, oldValue) {\n      console.log(\"检测到active-class变化:\" + value);\n      this.active_name = value;\n      this.$nextTick(function () {\n        this.$refs.menu.updateActiveName();\n        console.log(\"更新menu成功!\");\n      });\n    }\n  },\n  computed: {\n    active_class: function active_class() {\n      return this.$store.state.menu_active_name;\n    }\n  },\n  created: function created() {\n    this.user = this.$store.state.user;\n    this.admin = this.$store.state.admin;\n  }\n};",{"version":3,"sources":["Heads.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"headerDiv\">\n    <Modal v-model=\"loginModal_flag\" width=\"360\" :mask-closable=\"false\" shadow>\n      <p slot=\"header\" style=\"text-align:left\">\n        <Icon type=\"ios-contact\" size=\"21\"/>\n        <span>Welcome to MOoj</span>\n      </p>\n      <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\">\n        <div style=\"text-align:center; padding:3px\">\n          <FormItem label=\"\" prop=\"name\">\n            <Input v-model=\"formValidate.username\" :maxlength=\"15\" placeholder=\"请输入用户名\" style=\"width: 320px\" clearable type=\"text\">\n              <Icon type=\"ios-contact\" slot=\"prefix\"/>\n            </Input>\n          </FormItem>\n          <FormItem label=\"\" prop=\"pwd\">\n            <Input v-model=\"formValidate.pwd\" placeholder=\"请输入密码\" :maxlength=\"16\" style=\"width: 320px\" clearable type=\"password\">\n              <Icon type=\"md-key\" slot=\"prefix\"/>\n            </Input>\n          </FormItem>\n          <input v-model=\"formValidate.passwd\" style=\"display: none;\" type=\"hidden\"/>\n          <Button long type=\"success\" @click.native=\"loginModalOk()\" style=\"width: 320px\">Login</Button>\n        </div>\n      </Form>\n      <div slot=\"footer\">\n        <a style=\"float: left;\">No account? Register now!</a>\n        <a style=\"float: right;\">Forget Password</a>\n        <br>\n      </div>\n    </Modal>\n    <Row>\n      <Col span=\"24\">\n        <Menu mode=\"horizontal\" theme=\"light\" :active-name=\"active_name\" shadow ref=\"menu\">\n          <Col span=\"3\" style=\"font-size: 20px\">Online Judge</Col>\n          <MenuItem name=\"home\" to=\"/home\">\n            <!--<router-link to=\"/home\">-->\n            <Icon type=\"ios-paper\"/>\n            Home\n            <!--</router-link>-->\n          </MenuItem>\n          <MenuItem name=\"problems\" to=\"/problems\">\n            <Icon type=\"ios-people\"/>\n            Problems\n          </MenuItem>\n          <MenuItem name=\"contents\" to=\"/contents\">\n            <Icon type=\"ios-stats\"/>\n            Contents\n          </MenuItem>\n          <MenuItem name=\"status\" to=\"/status\">\n            <Icon type=\"ios-construct\"/>\n            Status\n          </MenuItem>\n          <MenuItem name=\"rank\" to=\"/rank\">\n            <Icon type=\"ios-construct\"/>\n            Rank\n          </MenuItem>\n          <MenuItem name=\"about\" @click.native=\"logger\" to=\"/about\">\n            <Icon type=\"ios-construct\"/>\n            About\n          </MenuItem>\n          <!--<Submenu name=\"7\">\n            <template slot=\"title\">\n              <Icon type=\"ios-stats\"/>\n              Login\n            </template>\n            <MenuItem name=\"7-1\">Login</MenuItem>\n            <MenuItem name=\"7-2\">Register</MenuItem>\n          </Submenu>-->\n          <Dropdown trigger=\"click\">\n            <template v-if=\"user === null\">\n              <a href=\"javascript:void(0)\">\n                Login\n                <Icon type=\"ios-arrow-down\"></Icon>\n              </a>\n              <DropdownMenu slot=\"list\">\n                <DropdownItem @click.native=\"loginModal_flag = true\">Login</DropdownItem>\n                <DropdownItem>Register</DropdownItem>\n              </DropdownMenu>\n            </template>\n            <template v-else>\n              <a href=\"javascript:void(0)\">\n                {{user.nickname}}\n                <Icon type=\"ios-arrow-down\"></Icon>\n              </a>\n              <DropdownMenu slot=\"list\">\n                <DropdownItem>Setting</DropdownItem>\n                <DropdownItem>Messages</DropdownItem>\n                <template v-if=\"admin\">\n                  <DropdownItem to=\"/admin\">Control</DropdownItem>\n                </template>\n                <DropdownItem @click.native=\"logout\">Logout</DropdownItem>\n              </DropdownMenu>\n            </template>\n          </Dropdown>\n        </Menu>\n      </Col>\n    </Row>\n    <br>\n  </div>\n</template>\n<script>\n  import {hex_md5} from '../../../assets/md5.js'\n  import {mapActions, mapState, mapGetters} from 'vuex' //注册 action 和 state\n  \n  export default {\n    name: 'Heads',\n    \n    data() {\n      return {\n        active_name: \"home\",\n        user: null,\n        admin: false,\n        loginModal_flag: false,\n        formValidate: {\n          username: '',\n          passwd: '',\n          pwd: '',\n        },\n        ruleValidate: {\n          username: [\n            {required: true, message: 'The name cannot be empty', trigger: 'blur'}\n          ],\n          pwd: [\n            {required: true, message: 'Password cannot be empty', trigger: 'blur'}\n          ],\n        }\n      }\n    },\n    \n    methods: {\n      /**\n       * 登录请求\n       */\n      loginModalOk() {\n        this.$refs['formValidate'].validate((valid) => {\n          if (valid) {\n            // console.log(\"验证登录中...\");\n            /*var params = new URLSearchParams();\n            params.append('username', this.formValidate.name);\n            params.append('passwd', hex_md5(encodeURIComponent(this.formValidate.passwd + 'onlinejudge')));*/\n            this.formValidate.passwd = hex_md5(encodeURIComponent(this.formValidate.pwd + 'onlinejudge'));\n            //清除passwd\n            this.$axios({\n              url: '/api/api-oj/login',\n              method: 'post',\n              data: require('querystring').stringify(this.formValidate),\n            }).then(res => {\n              console.info('后台返回的数据', res.data);\n              if (res.data.code === 200) {\n                this.$Message.success('Success!');\n                this.$store.dispatch('login', res.data.data);\n                this.user = this.$store.state.user;\n                this.admin = this.$store.state.admin;\n                this.loginModal_flag = false;\n              } else {\n                this.loginModal_flag = true;\n                this.$Message.error(res.data.message);\n              }\n              \n            }).catch(err => {\n              console.info('报错的信息', err);\n              this.$Message.error('Fail!');\n              this.loginModal_flag = false;\n            });\n          } else {\n            this.$Message.error('input Error! Please Check!');\n            this.loginModal_flag = true;\n          }\n        });\n      },\n      \n      /**\n       * 注销请求\n       */\n      logout() {\n        //TODO 请求注销\n        this.$axios({\n          url: '/api/api-oj/logout',\n          method: 'post',\n          data: 'user_id = ' + this.user.user_id,\n        }).then(res => {\n          console.info('后台返回的数据', res.data);\n          if (res.data.code === 200) {\n          } else {\n          }\n        });\n        this.$store.dispatch('logout');\n        this.user = null;\n      },\n      \n      logger() {\n        console.log(\"md5:\" + hex_md5(encodeURIComponent('120211onlinejudge')));\n      }\n    },\n    watch: {\n      active_class: function (value, oldValue) {\n        console.log(\"检测到active-class变化:\" + value);\n        this.active_name = value;\n        this.$nextTick(function () {\n          this.$refs.menu.updateActiveName();\n          console.log(\"更新menu成功!\");\n        });\n      }\n    },\n    computed: {\n      active_class() {\n        return this.$store.state.menu_active_name;\n      }\n    },\n    created() {\n      this.user = this.$store.state.user;\n      this.admin = this.$store.state.admin;\n    }\n  };\n</script>\n"],"sourceRoot":"src/views/oj/components"}]}